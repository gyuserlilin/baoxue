"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}require(["require.config"],function(){require(["jquery","url","template","header","footer"],function(c,t,n,e){return new(function(){function t(){_classCallCheck(this,t),this.init(),this.n=0,this.delEcent(),this.tbodyDelEvent()}return _createClass(t,[{key:"init",value:function(){this.cart=JSON.parse(localStorage.getItem("cart")),this.shopCartBody(this.cart)}},{key:"shopCartBody",value:function(t){var e=n("tbody_xuan",{data:t});c("#tbody_box").html(e),this.numModule(),this.checkModule(),this.allPrice()}},{key:"numModule",value:function(){var a=this;c("#tbody_box").on("click",".plusBtn",function(){c(this).prev().val(Number(c(this).prev().val())+1);var t=c(this).parent().parent().parent().prev().children().html(),e=c(this).prev().val()*t;c(this).parent().parent().parent().next().children().html(e);var n,r=c(this).prev().attr("dataId");a.cart.some(function(t,e){return n=e,t.id==r})&&(a.cart[n].num=c(this).prev().val(),localStorage.setItem("cart",JSON.stringify(a.cart))),a.allPrice()}),c("#tbody_box").on("click",".minusBtn",function(){c(this).next().val(Number(c(this).next().val())-1);var t=c(this).parent().parent().parent().prev().children().html(),e=c(this).next().val()*t;c(this).parent().parent().parent().next().children().html(e);var n,r=c(this).next().attr("dataId");a.cart.some(function(t,e){return n=e,t.id==r})&&(a.cart[n].num=c(this).next().val(),localStorage.setItem("cart",JSON.stringify(a.cart))),a.allPrice()})}},{key:"checkModule",value:function(){var e=this,n=Array.from(c("#tbody_box").find(".tbodyCheck"));n.forEach(function(t){c("#theadCheck").change(function(){t.checked=c("#theadCheck")[0].checked,e.n=c("#theadCheck")[0].checked?n.length:0,c("#tfootInt").html(e.n)})}),n.forEach(function(t){c(t).change(function(){e.n+=t.checked?1:-1,c("#theadCheck")[0].checked=e.n===n.length,c("#tfootInt").html(e.n)})})}},{key:"delEcent",value:function(){var r=this;c("#deleteBtn").on("click",function(){Array.from(c("#tbody_box").find(".tbodyCheck")).forEach(function(t){if(t.checked){c(t).parent().parent().remove();var n=c(t).parent().parent().attr("aId");r.cart.some(function(t,e){n==t.id&&(r.cart.splice(e,1),localStorage.setItem("cart",JSON.stringify(r.cart)),console.log(r.cart))})}})})}},{key:"tbodyDelEvent",value:function(){var r=this;c(".tbodyDelBtn").on("click",function(){var t=this,e=c(this).parent().parent();c("#okBtn").on("click",function(){e.remove();var n=c(t).parent().parent().attr("aId");r.cart.some(function(t,e){n==t.id&&(r.cart.splice(e,1),localStorage.setItem("cart",JSON.stringify(r.cart)))})})})}},{key:"allPrice",value:function(){for(var t=Array.from(this.cart),e=0,n=0;n<t.length;n++)e+=Number(t[n].num)*Number(t[n][0].price);c(".priceOne").html(e)}}]),t}())})});