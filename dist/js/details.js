"use strict";function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}require(["require.config"],function(){require(["jquery","header","url","template","footer"],function(a,e,t,n){return new(function(){function e(){_classCallCheck(this,e),this.numModule(),this.init(),this.clickImg(),this.addToCart()}return _createClass(e,[{key:"init",value:function(){var n=this,r=location.search.slice(4);a.ajax({url:t.baseUrl+"details?id="+r,method:"GET",datatype:"json",success:function(e){if(1===e.res_code){n.detailsModule(e.res_body.data),n.leftImgModule(e.res_body.data),n.shop=e.res_body.data,n.shop.id=r;var t=e.res_body.data[0].text.title;a("#productName").html(t)}}})}},{key:"leftImgModule",value:function(e){var t=n("leftImg",{data:e});a("#imageBox").html(t)}},{key:"detailsModule",value:function(e){var t=n("descWrap",{data:e});a("#boxDesc").html(t)}},{key:"clickImg",value:function(){a("#imageBox").on("click","li",function(){var e=a(this).children("img").attr("src");a("#leftOne").attr("src",e)})}},{key:"numModule",value:function(){a("#plusBtn").on("click",function(){a("#numText").val(Number(a("#numText").val())+1)}),a("#minusBtn").on("click",function(){0===Number(a("#numText").val())?a("#numText").val(0):a("#numText").val(Number(a("#numText").val())-1)})}},{key:"addToCart",value:function(){var r=this;a("#shopBtn").on("click",function(){var n,e=localStorage.getItem("cart");e?((e=JSON.parse(e)).some(function(e,t){return n=t,e.id==r.shop.id})?e[n].num++:e.push(_objectSpread({},r.shop,{num:1})),localStorage.setItem("cart",JSON.stringify(e))):localStorage.setItem("cart",JSON.stringify([_objectSpread({},r.shop,{num:1})]))})}}]),e}())})});